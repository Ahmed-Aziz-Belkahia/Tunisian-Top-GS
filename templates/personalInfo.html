{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static "styles/personalInfo.css" %}?v=1.11">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

{% block title %}
<title>Tunisian Top Gs | Personal Info</title>
{% endblock title %}
{% endblock head %}

{% block header %}
{% include "components/navbar.html" %}
{% endblock header %}

{% block main %}

    <section class="personal-information-section">
        <div class="personal-information-body">
            <a href="#" onclick="goBack()"><i data-lucide="undo-2"></i> Go Back</a>
        </div>
        {% if not verified %}
        <div id="verificationPopup" class="modal">
            <div class="modal-content">
              <div class="wrap-verif">
                <span class="close" onclick="closePopupVerify()">&times;</span>
                  
                    <p>Please verify your email</p>
                  </div>
                
                <button id="requestNewLinkBtn" class="btn">
                  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="28" height="28" viewBox="0,0,256,256">
                  <defs><linearGradient x1="23.868" y1="7.222" x2="24.362" y2="20.277" gradientUnits="userSpaceOnUse" id="color-1_X0mEIh0RyDdL_gr1"><stop offset="0" stop-color="#e2e2e2"></stop><stop offset="0.57" stop-color="#ffffff"></stop><stop offset="1" stop-color="#e0e0e0"></stop></linearGradient><linearGradient x1="24" y1="28.758" x2="24" y2="40.363" gradientUnits="userSpaceOnUse" id="color-2_X0mEIh0RyDdL_gr2"><stop offset="0" stop-color="#e0e0e0"></stop><stop offset="0.35" stop-color="#e5e5e5"></stop><stop offset="0.554" stop-color="#ebebeb"></stop><stop offset="0.78" stop-color="#d7d7d7"></stop><stop offset="0.859" stop-color="#cfcfcf"></stop></linearGradient><linearGradient x1="24.043" y1="18.083" x2="23.944" y2="31.336" gradientUnits="userSpaceOnUse" id="color-3_X0mEIh0RyDdL_gr3"><stop offset="0" stop-color="#f8f8f8"></stop><stop offset="1" stop-color="#e1e1e1"></stop></linearGradient><linearGradient x1="12.398" y1="11.375" x2="33.069" y2="33.133" gradientUnits="userSpaceOnUse" id="color-4_X0mEIh0RyDdL_gr4"><stop offset="0" stop-color="#de6eff"></stop><stop offset="1" stop-color="#6b00b6"></stop></linearGradient></defs><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.33333,5.33333)"><path d="M46,10.21v1.07c-5.35,4.06667 -10.70333,8.13667 -16.06,12.21c-0.38,0.28 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.76,-0.58 -1.14,-0.86c-5.35,-4.07 -10.70333,-8.14 -16.06,-12.21v-1.07c0.0022,-1.77192 1.43808,-3.2078 3.21,-3.21h37.58c1.77192,0.0022 3.2078,1.43808 3.21,3.21z" fill="url(#color-1_X0mEIh0RyDdL_gr1)"></path><path d="M46,11.28v25.51c-0.0022,1.77192 -1.43808,3.2078 -3.21,3.21h-37.58c-1.77192,-0.0022 -3.2078,-1.43808 -3.21,-3.21v-25.51c5.35,4.06667 10.70333,8.13667 16.06,12.21c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86c5.35,-4.07 10.70333,-8.14 16.06,-12.21z" fill="#c1c1c1"></path><path d="M46,11.28v3c-5.35,4.07 -10.70333,8.14 -16.06,12.21c-0.38,0.28 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.76,-0.58 -1.14,-0.86c-5.35,-4.07 -10.70333,-8.14 -16.06,-12.21v-3c5.35,4.06667 10.70333,8.13667 16.06,12.21c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86c5.35,-4.07 10.70333,-8.14 16.06,-12.21z" fill="#a5a5a5"></path><path d="M46,11.6v3c-5.35,4.07 -10.679,8.181 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.033 -10.71,-8.144 -16.06,-12.21v-3c5.35,4.07 10.679,8.181 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.033 10.71,-8.144 16.06,-12.21z" fill="#a8a8a8"></path><path d="M46,11.912v3c-5.35,4.07 -10.679,8.181 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.029 -10.71,-8.14 -16.06,-12.21v-3c5.35,4.07 10.679,8.181 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.029 10.71,-8.14 16.06,-12.21z" fill="#ababab"></path><path d="M46,12.228v3c-5.35,4.07 -10.679,8.182 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.028 -10.71,-8.138 -16.06,-12.21v-3c5.35,4.07 10.679,8.182 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.028 10.71,-8.138 16.06,-12.21z" fill="#aeaeae"></path><path d="M46,12.544v3c-5.35,4.07 -10.679,8.182 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.028 -10.71,-8.14 -16.06,-12.21v-3c5.35,4.07 10.679,8.182 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.028 10.71,-8.14 16.06,-12.21z" fill="#b1b1b1"></path><path d="M46,12.861v3c-5.35,4.07 -10.679,8.181 -16.06,12.21c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-5.381,-4.029 -10.71,-8.14 -16.06,-12.21v-3c5.35,4.07 10.679,8.181 16.06,12.21c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c5.381,-4.029 10.71,-8.14 16.06,-12.21z" fill="#b4b4b4"></path><path d="M46,13.177v3c-5.35,4.07 -10.679,8.181 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.029 -10.71,-8.14 -16.06,-12.21v-3c5.35,4.07 10.679,8.181 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.029 10.71,-8.14 16.06,-12.21z" fill="#b8b8b8"></path><path d="M46,13.493v3c-5.35,4.07 -10.679,8.181 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.029 -10.71,-8.14 -16.06,-12.21v-3c5.35,4.07 10.679,8.181 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.029 10.71,-8.14 16.06,-12.21z" fill="#bababa"></path><path d="M46,13.809v3c-5.35,4.07 -10.679,8.181 -16.06,12.21c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-5.381,-4.029 -10.71,-8.14 -16.06,-12.21v-3c5.35,4.07 10.679,8.181 16.06,12.21c0.378,0.283 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.577 1.14,-0.86c5.381,-4.029 10.71,-8.14 16.06,-12.21z" fill="#bebebe"></path><path d="M46,14.125v3c-5.35,4.07 -10.70333,8.14 -16.06,12.21c-0.38,0.28 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.76,-0.58 -1.14,-0.86c-5.35,-4.07 -10.70333,-8.14 -16.06,-12.21v-3c5.35,4.07 10.70333,8.14 16.06,12.21c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86c5.35,-4.07 10.70333,-8.14 16.06,-12.21z" fill="#c1c1c1"></path><path d="M46,35.69v1.1c-0.0022,1.77192 -1.43808,3.2078 -3.21,3.21h-37.58c-1.77192,-0.0022 -3.2078,-1.43808 -3.21,-3.21v-1.1c4.69,-3.57 9.38667,-7.13667 14.09,-10.7c0.66,-0.5 1.31,-1 1.97,-1.5c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86l1.97,1.5c4.69,3.56 9.38667,7.12667 14.09,10.7z" fill="url(#color-2_X0mEIh0RyDdL_gr2)"></path><g><path d="M31.91,24.99c-0.66,0.5 -1.31,1 -1.97,1.5c-0.38,0.28 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.76,-0.58 -1.14,-0.86c-0.66,-0.5 -1.31,-1 -1.97,-1.5c0.66,-0.5 1.31,-1 1.97,-1.5c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86z" fill="#c1c1c1"></path><path d="M15.93,25.111c0.41,-0.31 0.817,-0.622 1.225,-0.932l0.789,-0.444c0.3,0.22 0.6,0.445 0.892,0.672l0.273,0.207c0.24,0.18267 0.48633,0.352 0.739,0.508c2.54308,1.57302 5.75692,1.57302 8.3,0c0.25333,-0.15733 0.50033,-0.327 0.741,-0.509l0.257,-0.2c0.3,-0.231 0.605,-0.46 0.907,-0.684c0.034,-0.026 0.78,0.491 0.814,0.465l1.2,0.912c-0.713,0.54 -1.413,1.086 -2.13,1.621c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-0.714,-0.527 -1.414,-1.076 -2.127,-1.616z" fill="#c5c5c5"></path><path d="M15.77,25.232c0.419,-0.316 0.835,-0.635 1.251,-0.952l0.807,-0.3c0.3,0.226 0.607,0.456 0.911,0.687l0.279,0.212c0.244,0.18467 0.49367,0.35867 0.749,0.522c2.58136,1.64812 5.88464,1.64812 8.466,0c0.256,-0.164 0.508,-0.34 0.753,-0.526l0.262,-0.2c0.31,-0.235 0.618,-0.47 0.927,-0.7c0.067,-0.052 0.758,0.371 0.826,0.32c0.106,0.08 1.122,0.854 1.229,0.934c-0.767,0.58 -1.52,1.167 -2.29,1.742c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-0.77,-0.571 -1.523,-1.159 -2.29,-1.739z" fill="#c8c8c8"></path><path d="M15.61,25.353c0.428,-0.322 0.853,-0.648 1.278,-0.971l0.824,-0.157c0.31,0.231 0.619,0.467 0.93,0.7l0.285,0.215c0.248,0.188 0.5,0.367 0.759,0.536c2.61841,1.72142 6.00959,1.72142 8.628,0c0.26,-0.17067 0.51533,-0.351 0.766,-0.541l0.267,-0.2c0.316,-0.239 0.63,-0.479 0.945,-0.714c0.1,-0.077 0.737,0.252 0.839,0.175c0.16,0.12 1.1,0.836 1.259,0.956c-0.82,0.62 -1.626,1.249 -2.45,1.864c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-0.824,-0.616 -1.63,-1.243 -2.45,-1.863z" fill="#cccccc"></path><path d="M15.45,25.474c0.436,-0.329 0.871,-0.662 1.3,-0.991l0.841,-0.013c0.316,0.237 0.631,0.478 0.949,0.718l0.291,0.219c0.252,0.19133 0.50833,0.375 0.769,0.551c2.65558,1.79338 6.13442,1.79338 8.79,0c0.263,-0.178 0.523,-0.365 0.778,-0.558l0.273,-0.2c0.323,-0.244 0.643,-0.489 0.963,-0.729c0.135,-0.1 0.715,0.133 0.852,0.029c0.213,0.16 1.076,0.819 1.289,0.979c-0.873,0.66 -1.733,1.33 -2.61,1.985c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-0.872,-0.664 -1.732,-1.33 -2.605,-1.99z" fill="#cfcfcf"></path><path d="M15.29,25.6c0.445,-0.336 0.888,-0.676 1.332,-1.011l0.858,0.13c0.322,0.243 0.643,0.489 0.968,0.733l0.3,0.224c0.257,0.193 0.516,0.382 0.779,0.564c2.69169,1.86788 6.26031,1.86788 8.952,0c0.266,-0.185 0.53,-0.377 0.79,-0.573l0.279,-0.209c0.329,-0.248 0.655,-0.5 0.982,-0.744c0.169,-0.129 0.693,0.013 0.863,-0.116c0.267,0.2 1.053,0.8 1.32,1c-0.927,0.7 -1.839,1.411 -2.77,2.105c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-0.934,-0.696 -1.846,-1.403 -2.773,-2.103z" fill="#d2d2d2"></path><path d="M15.13,25.717c0.454,-0.342 0.906,-0.69 1.359,-1.031l0.875,0.274c0.329,0.248 0.656,0.5 0.987,0.749l0.3,0.227c0.261,0.2 0.524,0.39 0.789,0.579c2.72832,1.9399 6.38568,1.9399 9.114,0c0.27,-0.19333 0.53667,-0.38967 0.8,-0.589c0.094,-0.072 0.189,-0.142 0.284,-0.213c0.335,-0.253 0.667,-0.508 1,-0.759c0.2,-0.155 0.672,-0.106 0.876,-0.261c0.32,0.24 1.03,0.784 1.35,1.024c-0.98,0.74 -1.946,1.492 -2.93,2.226c-0.378,0.283 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.577 -1.14,-0.86c-0.978,-0.734 -1.944,-1.486 -2.924,-2.226z" fill="#d5d5d5"></path><path d="M14.97,25.838c0.463,-0.348 0.924,-0.7 1.386,-1.051l0.892,0.418c0.335,0.254 0.668,0.511 1.006,0.764l0.309,0.231c0.265,0.2 0.531,0.4 0.8,0.593c2.76427,2.01329 6.51173,2.01329 9.276,0c0.273,-0.2 0.545,-0.4 0.815,-0.605l0.289,-0.216c0.343,-0.257 0.68,-0.517 1.019,-0.774c0.237,-0.181 0.651,-0.225 0.889,-0.406c0.374,0.28 1.007,0.766 1.38,1.046c-1.033,0.78 -2.052,1.574 -3.09,2.348c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.039,-0.774 -2.061,-1.568 -3.091,-2.348z" fill="#d9d9d9"></path><path d="M14.81,25.959c0.471,-0.354 0.942,-0.717 1.413,-1.07l0.909,0.561c0.341,0.259 0.68,0.522 1.025,0.78l0.315,0.234l0.809,0.608c2.8003,2.08574 6.6377,2.08574 9.438,0l0.827,-0.621l0.3,-0.22c0.349,-0.261 0.693,-0.527 1.038,-0.789c0.27,-0.206 0.629,-0.345 0.9,-0.551c0.427,0.32 0.983,0.748 1.41,1.068c-1.087,0.82 -2.159,1.655 -3.25,2.469c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.095,-0.814 -2.164,-1.649 -3.254,-2.469z" fill="#dcdcdc"></path><path d="M33.35,26.08c-1.14,0.86 -2.27,1.73 -3.41,2.59c-0.38,0.28 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.76,-0.58 -1.14,-0.86c-1.14,-0.86 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.31,1 1.97,1.5c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86c0.66,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.265,1.736 -3.41,2.59c-0.378,0.282 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.762,-0.578 -1.14,-0.86c-1.145,-0.854 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.307,1 1.97,1.5c0.378,0.282 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.762,-0.578 1.14,-0.86c0.663,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path><path d="M33.35,26.08c-1.14,0.86 -2.27,1.73 -3.41,2.59c-0.38,0.28 -0.76,0.57 -1.14,0.86c-2.83549,2.16004 -6.76451,2.16004 -9.6,0c-0.38,-0.29 -0.76,-0.58 -1.14,-0.86c-1.14,-0.86 -2.27,-1.73 -3.41,-2.59c0.48,-0.36 0.96,-0.73 1.44,-1.09c0.66,0.5 1.31,1 1.97,1.5c0.38,0.28 0.76,0.57 1.14,0.86c2.83549,2.16004 6.76451,2.16004 9.6,0c0.38,-0.29 0.76,-0.58 1.14,-0.86c0.66,-0.5 1.31,-1 1.97,-1.5c0.48,0.36 0.96,0.73 1.44,1.09z" fill="#e0e0e0"></path></g><circle cx="24" cy="23.85" r="10.266" fill="url(#color-3_X0mEIh0RyDdL_gr3)"></circle><path d="M36.128,22.521c0,4.669 -2.217,7.591 -5.77,7.591c-1.836,0 -3.172,-0.881 -3.5,-2.291h-0.258c-0.55399,1.44142 -1.98342,2.35287 -3.524,2.247c-3.054,0 -5.08,-2.467 -5.08,-6.2c0,-3.568 2,-5.991 4.933,-5.991c1.45926,-0.07114 2.81681,0.7467 3.436,2.07h0.264v-1.747h2.966v7.782c0,1.042 0.514,1.644 1.41,1.644c1.483,0 2.437,-1.879 2.437,-4.86c0,-5.315 -3.671,-8.78 -9.25,-8.78c-5.682,0 -9.632,4.082 -9.632,9.94c0,5.962 3.95,9.72 10.19,9.72c1.3477,0.03188 2.69293,-0.13113 3.994,-0.484v2.393c-1.3739,0.36802 -2.79176,0.54601 -4.214,0.529c-7.65,0 -12.657,-4.86 -12.657,-12.231c0,-7.253 5.066,-12.245 12.407,-12.245c7.032,0.004 11.848,4.438 11.848,10.913zM21.328,23.96c0,2.085 0.925,3.347 2.466,3.347c1.571,0 2.555,-1.277 2.555,-3.347c0,-2.07 -0.984,-3.348 -2.54,-3.348c-1.556,0 -2.481,1.248 -2.481,3.348z" fill="url(#color-4_X0mEIh0RyDdL_gr4)"></path></g></g>
                  </svg>
                  Request New Verification Link</button>
                  <span id="loadingSpinner" class="loading-spinner" style="display:none;"></span>
            </div>
        </div>
        
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            function requestNewLink() {
              const buttonText = document.getElementById("buttonText");
              const loadingSpinner = document.getElementById("loadingSpinner");
        
              if (buttonText && loadingSpinner) {
                buttonText.style.display = "none";
                loadingSpinner.style.display = "block";
              }
        
              fetch('{% url "request_new_verification_link" %}', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'X-CSRFToken': '{{ csrf_token }}'  // Ensure to include CSRF token
                }
              })
              .then(response => response.json())
              .then(data => {
                if (data.success) {
                  alert('New verification link sent successfully.');
                } else {
                  alert('Failed to send new verification link. Please try again later.');
                }
                closePopupVerify();
              })
              .catch(error => {
                alert('Error requesting new verification link: ' + error);
                closePopupVerify();
              });
            }
        
            document.getElementById("requestNewLinkBtn").addEventListener("click", function (event) {
              event.preventDefault();
              requestNewLink();
            });
        
            // Open the popup automatically when the DOM is ready
            openPopup();
          });
        
          function openPopup() {
            document.getElementById("verificationPopup").style.display = "flex";
          }
        
          function closePopupVerify() {
            document.getElementById("verificationPopup").style.display = "none";
          }
        </script>
        {% endif %}
  
        <div class="wrap-edit-profile">
            <div class="flex-col info-cards">
                
                <span class="h1-text">Personal Information</span>
                
                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">First Name</span>
                        <span class="p-text secondary-text">{{ request.user.first_name|default:"" }}</span>
                        <input type="text" name="first_name" class="edit-field" style="display:none;">
                    </div>
                    <button class="change-btn" onclick="editField(this, 'first_name')">Edit</button>
                </div>

                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">Last Name</span>
                        <span class="p-text secondary-text">{{ request.user.last_name|default:"" }}</span>
                        <input type="text" name="last_name" class="edit-field" style="display:none;">
                    </div>
                    <button class="change-btn" onclick="editField(this, 'last_name')">Edit</button>
                </div>
                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">Username</span>
                        <span class="p-text secondary-text">{{ request.user.username|default:"" }}</span>
                        <input type="text" name="username" class="edit-field" style="display:none;">
                    </div>
                    <button class="change-btn" onclick="editField(this, 'username')">Edit</button>
                </div>

                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">E-mail</span>
                        <span class="p-text secondary-text">{{ request.user.email|default:"No Email" }}</span>
                        <input type="email" name="email" class="edit-field" style="display:none;">
                    </div>
                    <button class="change-btn" onclick="editField(this, 'email')">Edit</button>
                </div>

                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">Phone Number</span>
                        <div class="wrap-phone">
                        <span class="p-text secondary-text">{{ request.user.tel|default:"" }}</span>
                        <input id="phone" type="text" name="tel" class="edit-field" style="display:none;">  
                    </div>
                    </div>
                    <button class="change-btn" onclick="editField(this, 'tel')">Edit</button>
                </div>
                
                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">Profile Picture</span>
                        <input type="file" name="pfp" class="edit-field" style="display:none;">
                    
                    </div>
                    <button class="change-btn" onclick="editField(this, 'pfp')">Upload</button>
                </div>
                <div class="flex card-item">
                    <div class="flex flex-col info-section">
                        <span class="p-text-p">Bio</span>
                        
                        <span class="p-text secondary-text">{{ request.user.bio|default:"" }}</span>
                        <input type="text" name="bio" class="edit-field" style="display:none;">
                    
                    </div>
                    <button class="change-btn" onclick="editField(this, 'bio')">Edit</button>
                </div>
            </div>
        
        <div class="flex flex-col flex-center personal-info">
            <div class="flex-container-info">
                <div class="profile-pic">
                    <img src="{{ request.user.pfp.url }}" />
                </div>

                <div class="profile-name">
                    <span class="h1-text">{{ request.user.first_name|default:"" }} {{ request.user.last_name|default:"" }}</span>
                </div>

                <div class="badges-profile-edit">
                    {% for badge in request.user.badges.all %}
                    <img class="badges-g" src="{{ badge.icon.url }}" alt="">
                    {% endfor %}
                </div>

                <div class="flex flex-center profile-stats">
                    <div class="wrap-enrol">
                        <div class="wrap-icon-c">
                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="17" height="17"
                                viewBox="0,0,256,256">
                                <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt"
                                    stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                                    font-family="none" font-weight="none" font-size="none" text-anchor="none"
                                    style="mix-blend-mode: normal">
                                    <g transform="scale(10.66667,10.66667)">
                                        <path
                                            d="M19.5,3c-2.48528,0 -4.5,2.01472 -4.5,4.5c0,2.48528 2.01472,4.5 4.5,4.5c2.48528,0 4.5,-2.01472 4.5,-4.5c0,-2.48528 -2.01472,-4.5 -4.5,-4.5zM12.55273,9.10547c-2.26919,1.1343 -3.37319,3.43617 -3.9375,5.58789c-0.29602,-0.56515 -0.56741,-1.15172 -1.0293,-1.59961c-0.65606,-0.63618 -1.55816,-1.09375 -2.58594,-1.09375c-1.02778,0 -1.92988,0.45757 -2.58594,1.09375c-0.65606,0.63618 -1.11549,1.43773 -1.46289,2.27148c-0.69479,1.6675 -0.95117,3.4681 -0.95117,4.63477h2c0,-0.83333 0.24362,-2.53274 0.79883,-3.86523c0.2776,-0.66625 0.63067,-1.23969 1.00586,-1.60352c0.37519,-0.36382 0.72309,-0.53125 1.19531,-0.53125c0.47222,0 0.82012,0.16743 1.19531,0.53125c0.37519,0.36382 0.72826,0.93727 1.00586,1.60352c0.55521,1.3325 0.79883,3.0319 0.79883,3.86523h2c0,-0.96583 0.05672,-2.9156 0.54492,-4.78516c0.4882,-1.86955 1.38203,-3.56036 2.90234,-4.32031z">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                            <span class="p-text-enroll">Enrolled Courses</span>
                        </div>
                        <span class="h1-text-enroll">{{request.user.enrolled_courses.count}}</span>
                    </div>
                    <div class="wrap-enrol">
                        <div class="wrap-icon-c">
                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="17" height="17"
                                viewBox="0,0,256,256">
                                <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt"
                                    stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                                    font-family="none" font-weight="none" font-size="none" text-anchor="none"
                                    style="mix-blend-mode: normal">
                                    <g transform="scale(5.12,5.12)">
                                        <path
                                            d="M9,4c-2.74545,0 -5,2.25455 -5,5v32c0,2.74546 2.25455,5 5,5h32c2.74546,0 5,-2.25455 5,-5v-32c0,-2.74545 -2.25455,-5 -5,-5zM9,6h32c1.65454,0 3,1.34545 3,3v32c0,1.65454 -1.34546,3 -3,3h-32c-1.65455,0 -3,-1.34546 -3,-3v-32c0,-1.65455 1.34545,-3 3,-3zM25,9.80859l-0.93359,2.43359l-3.06836,7.99414l-11.12891,0.60547l8.60156,7.02734l-2.78125,10.76953l9.31055,-6.04687l9.31055,6.04688l-2.78125,-10.76953l8.60156,-7.02734l-11.12891,-0.60547zM25,15.39258l2.59766,6.77148l7.26953,0.39453l-5.5957,4.57227l1.81836,7.0293l-6.08984,-3.95312l-6.08984,3.95313l1.81836,-7.0293l-5.5957,-4.57227l7.26953,-0.39453z">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                            <span class="p-text-enroll">Points</span>
                        </div>
                        <span class="h1-text-enroll">{{ request.user.points }}</span>
                    </div>
                    <div class="wrap-enrol">
                        <div class="wrap-icon-c">
                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="17" height="17"
                                viewBox="0,0,256,256">
                                <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt"
                                    stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                                    font-family="none" font-weight="none" font-size="none" text-anchor="none"
                                    style="mix-blend-mode: normal">
                                    <g transform="scale(5.12,5.12)">
                                        <path
                                            d="M25,0c-2.75,0 -5,2.25 -5,5c0,1.39063 0.57422,2.65234 1.5,3.5625l-7.6875,11.8125c-0.56641,-0.22266 -1.16797,-0.375 -1.8125,-0.375c-2.75,0 -5,2.25 -5,5c0,1.82031 1.00391,3.40625 2.46875,4.28125l-3.75,10.78125c-0.23828,-0.03516 -0.47266,-0.0625 -0.71875,-0.0625c-2.75,0 -5,2.25 -5,5c0,2.75 2.25,5 5,5c2.75,0 5,-2.25 5,-5c0,-1.79297 -0.97656,-3.36719 -2.40625,-4.25l3.78125,-10.8125c0.20703,0.02734 0.41016,0.0625 0.625,0.0625c0.21484,0 0.41797,-0.03516 0.625,-0.0625l3.8125,10.78125c-1.44922,0.87891 -2.4375,2.47266 -2.4375,4.28125c0,2.75 2.25,5 5,5c2.75,0 5,-2.25 5,-5c0,-2.75 -2.25,-5 -5,-5c-0.22656,0 -0.4375,0.03125 -0.65625,0.0625l-3.8125,-10.78125c1.46484,-0.875 2.46875,-2.46094 2.46875,-4.28125c0,-1.39062 -0.57422,-2.65234 -1.5,-3.5625l7.6875,-11.8125c0.56641,0.22266 1.16797,0.375 1.8125,0.375c0.64453,0 1.24609,-0.15234 1.8125,-0.375l7.6875,11.8125c-0.92578,0.91016 -1.5,2.17188 -1.5,3.5625c0,1.82031 1.00391,3.40625 2.46875,4.28125l-3.8125,10.78125c-0.21875,-0.03125 -0.42969,-0.0625 -0.65625,-0.0625c-2.75,0 -5,2.25 -5,5c0,2.75 2.25,5 5,5c2.75,0 5,-2.25 5,-5c0,-1.80859 -0.98828,-3.40234 -2.4375,-4.28125l3.8125,-10.78125c0.20703,0.02734 0.41016,0.0625 0.625,0.0625c0.21484,0 0.41797,-0.03516 0.625,-0.0625l3.78125,10.8125c-1.42969,0.88281 -2.40625,2.45703 -2.40625,4.25c0,2.75 2.25,5 5,5c2.75,0 5,-2.25 5,-5c0,-2.75 -2.25,-5 -5,-5c-0.24609,0 -0.48047,0.02734 -0.71875,0.0625l-3.75,-10.78125c1.46484,-0.875 2.46875,-2.46094 2.46875,-4.28125c0,-2.75 -2.25,-5 -5,-5c-0.64453,0 -1.24609,0.15234 -1.8125,0.375l-7.6875,-11.8125c0.92578,-0.91016 1.5,-2.17187 1.5,-3.5625c0,-2.75 -2.25,-5 -5,-5zM25,2c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3zM12,22c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3zM38,22c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3zM5,42c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3zM19,42c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3zM31,42c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3zM45,42c1.66797,0 3,1.33203 3,3c0,1.66797 -1.33203,3 -3,3c-1.66797,0 -3,-1.33203 -3,-3c0,-1.66797 1.33203,-3 3,-3z">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                            <span class="p-text-enroll">Active Since</span>
                        </div>
                        <span class="h1-text-enroll">{{date}}</span>
                    </div>
                </div>
            </div>

            <div class="flex flex-col profile-bio">
                <span class="h1-text">Bio</span>
                <span class="p-text custombio">{{ request.user.bio|default:"" }}</span>
            </div>
        </div>
    </div>
    </div>
    </section>
    <!--  Pop Up's -->
    <div id="popupMessage" class="popup-message" style="display: none;">
        <div class="flex-pops">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 48 48">
                <linearGradient id="4UU4ptC_mBgYTIFHxQVZaa_hP6pCUyT8QGk_gr1" x1="-308.751" x2="36.906" y1="-346.874"
                    y2="49.567" gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#ffda1c"></stop>
                    <stop offset="1" stop-color="#feb705"></stop>
                </linearGradient>
                <path fill="url(#4UU4ptC_mBgYTIFHxQVZaa_hP6pCUyT8QGk_gr1)"
                    d="M44.634,37.846L25.76,7.787c0,0-0.508-1.05-1.76-1.05s-1.76,1.05-1.76,1.05L3.366,37.846	C3.366,37.846,3,38.337,3,39c0,1.105,0.895,2,2,2h38c1.105,0,2-0.895,2-2C45,38.337,44.634,37.846,44.634,37.846z">
                </path>
                <radialGradient id="4UU4ptC_mBgYTIFHxQVZab_hP6pCUyT8QGk_gr2" cx="18.189" cy="16.781" r="22.363"
                    gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#4b4b4b"></stop>
                    <stop offset=".531" stop-color="#393939"></stop>
                    <stop offset="1" stop-color="#252525"></stop>
                </radialGradient>
                <path fill="url(#4UU4ptC_mBgYTIFHxQVZab_hP6pCUyT8QGk_gr2)"
                    d="M24.014,37c-0.732,0-1.336-0.222-1.812-0.666c-0.476-0.444-0.714-0.981-0.714-1.613 c0-0.659,0.24-1.199,0.721-1.62c0.48-0.421,1.082-0.631,1.805-0.631c0.732,0,1.332,0.213,1.798,0.638 c0.467,0.426,0.7,0.963,0.7,1.613c0,0.659-0.231,1.203-0.693,1.633S24.755,37,24.014,37z M26.236,17.721l-0.481,12.175 c-0.015,0.372-0.321,0.666-0.693,0.666h-2.179c-0.373,0-0.679-0.295-0.693-0.668L21.735,17.72c-0.015-0.393,0.3-0.72,0.693-0.72 h3.116C25.937,17,26.252,17.327,26.236,17.721z">
                </path>
            </svg>
            <span id="popupSpan" class="span-popup"></span>
            <button id="popUpCloseButton" class="pop-up-close-button" onclick="closePopup()">Close</button>
        </div>
    </div>


{% endblock main %}

{% block footer %}{% endblock footer %}

{% block scripts %}
<script>
function editField(button, field) {
    var parentDiv = $(button).closest('.card-item');
    var infoSection = parentDiv.find('.info-section');
    var textSpan = infoSection.find('.p-text');
    var inputField = infoSection.find('.edit-field');

    if ($(button).text() === 'Edit') {
        textSpan.hide();
        inputField.show();
        $(button).text('Confirm');
    } 
    else if ($(button).text() === 'Upload') {
        textSpan.hide();
        inputField.show();
        $(button).text('Confirm');
    }    
    else {
        if (field === 'pfp') {
            var file = inputField[0].files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    showPopup('File size must be less than 5MB.');
                    return;
                }

                var formData = new FormData();
                formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');
                formData.append(field, file);
                updateField(formData);
            }
        } else {
            textSpan.text(inputField.val()).show();
            inputField.hide();
            $(button).text('Edit');
            var data = {};
            data[field] = inputField.val();
            updateField(JSON.stringify(data));
        }
    }
}

function updateField(data) {
    $.ajax({
        type: 'POST',
        url: '{% url "update_user_info" %}',
        data: data,
        processData: false,
        contentType: false,
        success: function (response) {
            if (response.status !== 'success') {
                if (response.message.includes('too many times')) {
                    showRateLimitPopup(response.message);
                } else {
                    showPopup(parseErrorMessage(response.message));
                }
            } else {
                showPopup('Your profile has been updated successfully.');
            }
        },
        error: function (response) {
            showPopup('An error occurred while updating your profile. Please try again.');
        }
    });
}


    function parseErrorMessage(message) {
        if (typeof message === 'string') {
            return message;
        }
        if (typeof message === 'object') {
            let errorMsg = '';
            for (const [field, errors] of Object.entries(message)) {
                errorMsg += `${field}: ${errors.join(', ')}\n`;
            }
            return errorMsg;
        }
        return 'An unknown error occurred.';
    }

    function showRateLimitPopup(message) {
        const timeLeft = parseInt(message.match(/\d+/)[0]);
        let countdown = timeLeft;

        $('#popupSpan').text(`${message} Please wait for ${countdown} seconds.`);
        $('#popupMessage').show();

        const interval = setInterval(() => {
            countdown -= 1;
            $('#popupSpan').text(`Please wait for ${countdown} seconds.`);
            if (countdown <= 0) {
                clearInterval(interval);
                $('#popupMessage').hide();
            }
        }, 1000);
    }

    function showPopup(message) {
        $('#popupSpan').text(message);
        $('#popupMessage').show();
    }

    function closePopup() {
        $('#popupMessage').hide();
    }

    function goBack() {
        window.history.back();
        return false; 
    }

    document.addEventListener('DOMContentLoaded', function () {
        var input = document.querySelector("#phone");
        window.intlTelInput(input, {
            initialCountry: "auto",
            strictMode: true,
            geoIpLookup: function (success, failure) {
                fetch('https://ipinfo.io/json', {cache: 'reload'}).then(function(response) {
                    if (response.ok) {
                        return response.json()
                    }
                    throw new Error('Failed: ' + response.status);
                }).then(function(ipinfo) {
                    success(ipinfo.country);
                }).catch(function() {
                    success('US');
                });
            },
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
        });
    });
</script>
{% endblock scripts %}
